front:
  image: spiralout/alpine-nginx-phpfpm
  ports:
    - "80:80"
  volumes_from:
    - www
    - sites
  links:  
    - mysql:mysql
    - redis:predis

www:
  image: tianon/true
  volumes:
    - ./www:/var/www

sites:
  image: tianon/true
  volumes:
    - ./sites:/etc/nginx/sites-enabled

mysql:
  image: spiralout/alpine-mariadb
  ports:
    - "3306:3306"
  volumes:
    - ./database:/var/lib/mysql

composer:  
   image: spiralout/dcomposer
   volumes_from:
     - www

artisan:
   image: spiralout/dartisan
   volumes_from:
     - www
   links:
      - mysql:mysql
      - redis:predis
   expose:
    - "3306"  

nodejs:  
  image: spiralout/dnodejs
  volumes_from:
     - www

redis:
   image: spiralout/alpine-redis
   volumes_from:
     - redis-data
   ports:
     - "6379"


redis-data:
  image: tianon/true
  volumes:
    - ./redis-data:/data

